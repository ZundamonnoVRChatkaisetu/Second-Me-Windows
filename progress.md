# Second-Me-Windows 進捗管理

## 以下のことを意識して進捗管理ファイルを更新してください
- 完了済みのタスクは簡潔にまとめる
- あなたが理解しやすく管理することが目的なので、あなたの理解しやすい形式で更新する

## 最新のアップデート (2025/3/23)
- トレーニングデータ管理機能のバックエンド実装
  - トレーニング管理用モジュール `training_manager.py` の作成
  - トレーニングデータAPIエンドポイントの追加 
    - `/api/training/data` - トレーニングデータ一覧を取得
    - `/api/training/data/:id` - 特定のトレーニングデータを取得/削除
    - `/api/training/upload` - トレーニングデータのアップロード
    - `/api/training/process` - トレーニングプロセスの実行
    - `/api/training/status/:id` - トレーニング状態の取得
    - `/api/training/log/:id` - トレーニングログの取得
    - `/api/training/history` - トレーニング履歴の取得
    - `/api/training/cancel/:id` - トレーニングプロセスの取り消し
  - ファイルサイズ問題回避のためのコード分割とモジュール化
  - バックグラウンドプロセスとしてのトレーニング実行対応
  - プロファイルごとのトレーニング設定・履歴管理

## 前回のアップデート
- トレーニングデータ管理機能の設計実施
- WorkSpace機能の実装完了
- メモリー管理機能の強化完了

## 実装済み機能の概要

### 1. プロファイル管理
- 複数の「第2の自分」（プロファイル）の作成・管理
- プロファイル間でのデータ分離（メモリー、トレーニングデータ、WorkSpace）
- プロファイル詳細表示・編集機能
- プロファイル切り替えとデータ自動連携
- ウィザード形式のプロファイル作成フロー

### 2. モデル管理
- ローカルモデルの検出・選択機能
- プロファイルごとのモデル設定保存
- モデルを使用したチャット機能

### 3. メモリー管理
- メモリーの追加・編集・削除
- カテゴリ・重要度付けによる整理
- メモリー検索・フィルタリング機能
- 複数形式（テキスト/CSV/JSON）からの一括インポート

### 4. WorkSpace管理
- プロファイル固有のWorkSpaceディレクトリ
- ファイル・ディレクトリ操作（作成/読取/編集/削除）
- WorkSpaceエクスプローラーUI

### 5. トレーニングデータ管理
- トレーニングデータのアップロード・管理
- カテゴリ別データ分類システム
- トレーニングプロセスの実行・モニタリング（バックエンド実装済み）
- トレーニング履歴の管理とログ表示（バックエンド実装済み）

## 現在の状況
- バックエンドサーバー（Flask）はポート8002で稼働中
- CORSプロキシ（Express）はポート8003で稼働中
- フロントエンド（Next.js）はポート3000で稼働中
- プロファイル管理機能を完全実装
- モデル検出・選択・チャット機能を実装
- メモリー管理機能を強化完了
- WorkSpace機能を実装完了
- トレーニングデータ管理のバックエンド実装完了

## 実装計画（進行中/今後の予定）

### 1. トレーニングデータ管理用フロントエンド実装
**目的:** トレーニングデータを視覚的に管理し、トレーニングプロセスを直感的に操作できるUIを提供する

**現状:**
- バックエンドAPIエンドポイントは実装済み
- フロントエンドUIの設計が完了

**実装予定:**
1. トレーニングデータ一覧ページ（`/training`）
2. データアップロードページ（`/training/upload`）
3. トレーニング設定・実行ページ（`/training/process`）
4. トレーニング進行状況モニタリングページ（`/training/status/:id`）
5. トレーニング履歴ページ（`/training/history`）

### 2. 実際のトレーニング機能の実装
**目的:** シミュレーションではなく、実際にモデルをカスタマイズするトレーニング機能を提供する

**実装予定:**
1. LLaMA.cppを使用したファインチューニング機能
2. 学習プロセスの最適化
3. GPUアクセラレーションのサポート
4. モデル評価・比較機能

### 3. チャットUI/UX改善
**目的:** チャット体験をより自然で使いやすくする

**実装予定:**
1. チャット履歴の保存機能
2. 長文応答の折りたたみ/展開機能
3. コード表示の改善（シンタックスハイライト）
4. プロファイル切り替え時のコンテキスト切り替え強化

### 4. UI/UX全体の改善
**目的:** より直感的で使いやすいインターフェースを提供する

**実装予定:**
1. ナビゲーション構造の最適化
2. モバイル対応の強化
3. ダークモードの完全サポート
4. 一貫したデザインシステムの適用

### 5. ドキュメントの更新
**目的:** ユーザーが機能を理解し活用できるようにする

**実装予定:**
1. README.mdの更新（ローカルモデル機能、プロファイル機能などの説明追加）
2. セットアップ手順の詳細化
3. トレーニング機能のチュートリアル作成

## よくある質問と回答

### 複数の第2の自分を作成する際のデータ管理について
**Q: 複数の第2の自分を作成できるようにしたけど、同じモデルを使用するわけだから、トレーニングしたことが混ざったりしちゃわない？**

**A:** 各プロファイル（第2の自分）には完全に独立したデータディレクトリを割り当てています。同じベースモデルを使用していても、トレーニングデータとファインチューニング結果はプロファイルごとに別々に保存され、メモリーデータも分離されています。各プロファイルが独自のWorkSpaceディレクトリを持つため、ファイルが混ざることもありません。

### トレーニングについて
**Q: 第2の自分のトレーニングをどのように実行して、進捗を確認できますか？**

**A:** トレーニング管理機能のバックエンド部分を実装しました。これにより、カテゴリ別にトレーニングデータを整理し、学習率やエポック数などのパラメータを調整でき、トレーニングの進行状況をリアルタイムで確認できます。現在はフロントエンドUI開発中で、完成後は直感的なインターフェースでトレーニングプロセス全体を管理できるようになります。

## 主要APIエンドポイント
1. **プロファイル管理**: `/api/profiles`, `/api/profiles/create`, `/api/profiles/activate` など
2. **モデル管理**: `/api/models`, `/api/models/set`
3. **チャット**: `/api/chat`
4. **メモリー管理**: `/api/memory`, `/api/memory/:id`, `/api/memory/import`
5. **WorkSpace管理**: `/api/workspace/list`, `/api/workspace/file`, `/api/workspace/directory`
6. **トレーニング管理**: `/api/training/data`, `/api/training/process`, `/api/training/status/:id` など

## 実装済みコンポーネント
- **プロファイル関連**: `ProfileSelector.tsx`, `profiles/wizard.tsx`, `profiles/[id]/index.tsx`, `profiles/[id]/edit.tsx`
- **モデル関連**: `ModelSelector.tsx`, `settings.tsx`
- **メモリー関連**: `memory/index.tsx`, `memory/batch-upload.tsx`
- **WorkSpace関連**: `WorkSpaceExplorer.tsx`, `workspace/index.tsx`
- **共通コンポーネント**: `ui/StepWizard.tsx`, `Layout.tsx`, `NavigationHeader.tsx`

## 実装予定のコンポーネント
- **トレーニング関連**: `training/index.tsx`, `training/upload.tsx`, `training/process.tsx`, `training/history.tsx`
- **トレーニングUI**: `components/training/DataList.tsx`, `components/training/CategoryFilter.tsx`, `components/training/ParameterConfig.tsx`, `components/training/StatusMonitor.tsx`

## 技術的詳細
- バックエンドはFlask、フロントエンドはNext.js
- モデルは`/models`ディレクトリに配置し、llama.cppで処理
- プロファイルごとのデータは以下のディレクトリ構造で分離:
  - `/profiles/[プロファイルID]/` - プロファイル基本データ
  - `/profiles/[プロファイルID]/memories/` - メモリーデータ
  - `/profiles/[プロファイルID]/training_data/` - トレーニングデータ
  - `/profiles/[プロファイルID]/training_logs/` - トレーニングログ
  - `/profiles/[プロファイルID]/trained_models/` - トレーニング済みモデル
  - `/WorkSpace/[プロファイルID]/` - ワークスペースファイル
